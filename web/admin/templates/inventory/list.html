{{define "content"}}
<div class="inventory-list-container">
    <div class="page-header">
        <h2>Inventory Levels</h2>
        <div class="page-actions">
            <button class="btn btn-primary" onclick="location.href='/admin/inventory/new'">
                <i class="fa fa-plus"></i> Add Inventory
            </button>
        </div>
    </div>

    <!-- Filters -->
    <div class="card mb-3">
        <div class="card-body">
            <form method="GET" action="/admin/inventory">
                <div class="row">
                    <div class="col-md-4">
                        <input type="text" class="form-control" name="sku" placeholder="Search by SKU..." value="{{.Filters.SKU}}">
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" name="warehouse">
                            <option value="">All Warehouses</option>
                            {{range .Warehouses}}
                            <option value="{{.ID}}"{{if eq $.Filters.WarehouseID .ID}} selected{{end}}>{{.Name}}</option>
                            {{end}}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" name="status">
                            <option value="">All Status</option>
                            <option value="in_stock"{{if eq $.Filters.Status "in_stock"}} selected{{end}}>In Stock</option>
                            <option value="low_stock"{{if eq $.Filters.Status "low_stock"}} selected{{end}}>Low Stock</option>
                            <option value="out_of_stock"{{if eq $.Filters.Status "out_of_stock"}} selected{{end}}>Out of Stock</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-secondary w-100">Filter</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Inventory Table -->
    <div class="card">
        <div class="card-body">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>SKU</th>
                        <th>Product</th>
                        <th>Warehouse</th>
                        <th>On Hand</th>
                        <th>Available</th>
                        <th>Reserved</th>
                        <th>Reorder Point</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Items}}
                    <tr>
                        <td><code>{{.SKUID}}</code></td>
                        <td>{{.ProductName}}</td>
                        <td>{{if .WarehouseID}}{{.WarehouseID}}{{else}}-{{end}}</td>
                        <td>{{.QuantityOnHand}}</td>
                        <td>{{.QuantityAvailable}}</td>
                        <td>{{.QuantityReserved}}</td>
                        <td>{{.ReorderPoint}}</td>
                        <td>
                            {{if gt .QuantityAvailable 0}}
                                <span class="badge badge-success">In Stock</span>
                            {{else if .AllowBackorder}}
                                <span class="badge badge-warning">Backorder</span>
                            {{else}}
                                <span class="badge badge-danger">Out of Stock</span>
                            {{end}}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="/admin/inventory/{{.ID}}" class="btn btn-info" title="View">
                                    <i class="fa fa-eye"></i>
                                </a>
                                <a href="/admin/inventory/{{.ID}}/edit" class="btn btn-primary" title="Edit">
                                    <i class="fa fa-edit"></i>
                                </a>
                                <a href="/admin/inventory/{{.ID}}/adjust" class="btn btn-warning" title="Adjust">
                                    <i class="fa fa-exchange"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>

            <!-- Pagination -->
            {{if .Pagination}}
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item{{if not .Pagination.HasPrev}} disabled{{end}}">
                        <a class="page-link" href="?page={{.Pagination.PrevPage}}">Previous</a>
                    </li>
                    {{range .Pagination.Pages}}
                    <li class="page-item{{if .Active}} active{{end}}">
                        <a class="page-link" href="?page={{.Number}}">{{.Number}}</a>
                    </li>
                    {{end}}
                    <li class="page-item{{if not .Pagination.HasNext}} disabled{{end}}">
                        <a class="page-link" href="?page={{.Pagination.NextPage}}">Next</a>
                    </li>
                </ul>
            </nav>
            {{end}}
        </div>
    </div>
</div>
{{end}}
